<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConstructEdge - Communication Module</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f9fafb;
            color: #111827;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .header h1 {
            color: #f97316;
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .header p {
            color: #6b7280;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .card-header {
            background: #f97316;
            color: white;
            padding: 16px 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-content {
            padding: 20px;
        }

        /* Site Selection */
        .site-selector {
            margin-bottom: 20px;
        }

        .site-selector label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #374151;
        }

        .site-selector select {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
            background: white;
        }

        .site-selector select:focus {
            outline: none;
            border-color: #f97316;
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }

        /* Location Tracking */
        .location-info {
            background: #fef3e2;
            border: 1px solid #fed7aa;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .location-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .location-row:last-child {
            margin-bottom: 0;
        }

        .location-label {
            font-weight: 500;
            color: #9a3412;
        }

        .location-value {
            color: #ea580c;
            font-family: monospace;
        }

        .track-btn {
            background: #f97316;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        .track-btn:hover {
            background: #ea580c;
        }

        .track-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }

        /* Notification Settings */
        .notification-settings {
            display: grid;
            gap: 16px;
        }

        .notification-group {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
        }

        .notification-group h4 {
            margin-bottom: 12px;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group {
            margin-bottom: 12px;
        }

        .form-group label {
            display: block;
            margin-bottom: 4px;
            font-weight: 500;
            color: #374151;
            font-size: 14px;
        }

        .form-group input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }

        .form-group input:focus {
            outline: none;
            border-color: #f97316;
            box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.1);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
        }

        .save-btn {
            background: #16a34a;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .save-btn:hover {
            background: #15803d;
        }

        /* Work Status Timeline */
        .status-timeline {
            grid-column: 1 / -1;
        }

        .timeline-container {
            position: relative;
            padding-left: 30px;
        }

        .timeline-line {
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e5e7eb;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 24px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            margin-left: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -28px;
            top: 20px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 0 0 2px #e5e7eb;
        }

        .timeline-item.completed::before {
            background: #16a34a;
            box-shadow: 0 0 0 2px #16a34a;
        }

        .timeline-item.in-progress::before {
            background: #f59e0b;
            box-shadow: 0 0 0 2px #f59e0b;
        }

        .timeline-item.pending::before {
            background: #6b7280;
            box-shadow: 0 0 0 2px #6b7280;
        }

        .timeline-item.on-hold::before {
            background: #ef4444;
            box-shadow: 0 0 0 2px #ef4444;
        }

        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .status-title {
            font-weight: 600;
            color: #111827;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .status-badge.completed {
            background: #dcfce7;
            color: #166534;
        }

        .status-badge.in-progress {
            background: #fef3c7;
            color: #92400e;
        }

        .status-badge.pending {
            background: #f3f4f6;
            color: #374151;
        }

        .status-badge.on-hold {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-description {
            color: #6b7280;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .status-meta {
            display: flex;
            gap: 16px;
            font-size: 12px;
            color: #9ca3af;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background: #f97316;
            transition: width 0.3s ease;
        }

        /* Update Form */
        .update-form {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
        }

        .update-form h4 {
            margin-bottom: 12px;
            color: #374151;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 12px;
        }

        .form-row select,
        .form-row input {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }

        .form-row textarea {
            grid-column: 1 / -1;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            resize: vertical;
            min-height: 80px;
        }

        .update-btn {
            background: #f97316;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
        }

        .update-btn:hover {
            background: #ea580c;
        }

        /* Icons */
        .icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .container {
                padding: 10px;
            }
        }

        /* Map Container */
        .map-container {
            height: 300px;
            background: #f3f4f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            margin-top: 16px;
            border: 2px dashed #d1d5db;
        }

        .map-placeholder {
            text-align: center;
        }

        /* Notification Status */
        .notification-status {
            background: #ecfdf5;
            border: 1px solid #bbf7d0;
            border-radius: 6px;
            padding: 12px;
            margin-top: 12px;
            color: #166534;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üó®Ô∏è Communication Module</h1>
            <p>Track construction site locations, manage notifications, and monitor work progress status</p>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Location Tracking Card -->
            <div class="card">
                <div class="card-header">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                    Site Location Tracking
                </div>
                <div class="card-content">
                    <!-- Site Selection -->
                    <div class="site-selector">
                        <label for="siteSelect">Select Construction Site:</label>
                        <select id="siteSelect" onchange="loadSiteLocation()">
                            <option value="">Choose a site...</option>
                            <option value="site1">N-F complex panchavatai</option>
                            <option value="site2">Residential Tower A Nashik-Road</option>
                            <option value="site3">Shopping Mall Extension</option>
                            <option value="site4">Industrial Warehouse Sula-Wines</option>
                        </select>
                    </div>

                    <!-- Location Information -->
                     
                    <div class="location-info" id="locationInfo" style="display: none;">
                        <div class="location-row">
                            <span class="location-label">Latitude:</span>
                            <span class="location-value" id="latitude">-</span>
                        </div>
                        <div class="location-row">
                            <span class="location-label">Longitude:</span>
                            <span class="location-value" id="longitude">-</span>
                        </div>
                        <div class="location-row">
                            <span class="location-label">Address:</span>
                            <span class="location-value" id="address">-</span>
                        </div>
                        <div class="location-row">
                            <span class="location-label">Last Updated:</span>
                            <span class="location-value" id="lastUpdated">-</span>
                        </div>
                        <button class="track-btn" onclick="trackLocation()">
                            üìç Track Current Location
                        </button>
                    </div>

                    <!-- Map Container -->
                    <div class="map-container" id="mapContainer" style="display: none;">
                        <div class="map-placeholder">
                            <svg class="icon" style="width: 48px; height: 48px; margin-bottom: 8px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                <circle cx="12" cy="10" r="3"/>
                            </svg>
                            <p>Interactive Map View</p>
                            <small>Site location will be displayed here</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notification Settings Card -->
            <div class="card">
                <div class="card-header">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                    </svg>
                    Notification Settings
                </div>
                <div class="card-content">
                    <div class="notification-settings">
                        <!-- Email Notifications -->
                        <div class="notification-group">
                            <h4>
                                <svg class="icon" style="width: 16px; height: 16px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                    <polyline points="22,6 12,13 2,6"/>
                                </svg>
                                Email Updates
                            </h4>
                            <div class="form-group">
                                <label>Primary Email:</label>
                                <input type="email" id="primaryEmail" placeholder="manager@company.com" value="john.smith@constructedge.com">
                            </div>
                        
                            <div class="checkbox-group">
                                <input type="checkbox" id="emailDaily" checked>
                                <label for="emailDaily">Daily progress reports</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="emailMilestone" checked>
                                <label for="emailMilestone">Milestone completions</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="emailIssues" checked>
                                <label for="emailIssues">Issues and delays</label>
                            </div>
                            <button class="save-btn" onclick="saveEmailSettings()">Save Email Settings</button>
                        </div>

                        <!-- SMS Notifications -->
                        <div class="notification-group">
                            <h4>
                                <svg class="icon" style="width: 16px; height: 16px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                                </svg>
                                SMS/Text Updates
                            </h4>
                            <div class="form-group">
                                <label>Primary Phone:</label>
                                <input type="tel" id="primaryPhone" placeholder="+1 (555) 123-4567" value="+1 (555) 987-6543">
                            </div>
                            <div class="form-group">
                                <label>Secondary Phone:</label>
                                <input type="tel" id="secondaryPhone" placeholder="+1 (555) 987-6543">
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="smsUrgent" checked>
                                <label for="smsUrgent">Urgent alerts only</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="smsMilestone">
                                <label for="smsMilestone">Milestone updates</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="smsWeekly">
                                <label for="smsWeekly">Weekly summaries</label>
                            </div>
                            <button class="save-btn" onclick="saveSMSSettings()">Save SMS Settings</button>
                        </div>
                    </div>

                    <div class="notification-status" id="notificationStatus" style="display: none;">
                        ‚úÖ Notification settings saved successfully!
                    </div>
                </div>
            </div>
        </div>

        <!-- Work Status Timeline -->
        <div class="card status-timeline">
            <div class="card-header">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                    <path d="M9 9h6"/>
                    <path d="M9 15h6"/>
                </svg>
                Work Progress Status Timeline
            </div>
            <div class="card-content">
                <div class="timeline-container" id="timelineContainer">
                    <!-- Timeline items will be populated by JavaScript -->
                </div>

                <!-- Add New Status Update Form -->
                <div class="update-form">
                    <h4>Add Status Update</h4>
                    <div class="form-row">
                        <select id="newStatus">
                            <option value="pending">Pending</option>
                            <option value="in-progress">In Progress</option>
                            <option value="completed">Completed</option>
                            <option value="on-hold">On Hold</option>
                        </select>
                        <input type="number" id="newProgress" placeholder="Progress %" min="0" max="100">
                    </div>
                    <div class="form-row">
                        <input type="text" id="newTitle" placeholder="Status Title">
                        <input type="date" id="newDate">
                    </div>
                    <div class="form-row">
                        <textarea id="newDescription" placeholder="Describe the current status, progress made, or any issues encountered..."></textarea>
                    </div>
                    <button class="update-btn" onclick="addStatusUpdate()">Add Status Update</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample site data
        const siteData = {
            site1: {
                name: "Downtown Office Complex",
                latitude: "40.7589",
                longitude: "-73.9851",
                address: "123 Business Ave, New York, NY 10001",
                lastUpdated: "2024-01-15 14:30:00"
            },
            site2: {
                name: "Residential Tower A",
                latitude: "40.7505",
                longitude: "-73.9934",
                address: "456 Residential St, New York, NY 10002",
                lastUpdated: "2024-01-15 12:15:00"
            },
            site3: {
                name: "Shopping Mall Extension",
                latitude: "40.7614",
                longitude: "-73.9776",
                address: "789 Commerce Blvd, New York, NY 10003",
                lastUpdated: "2024-01-15 16:45:00"
            },
            site4: {
                name: "Highway Bridge Project",
                latitude: "40.7282",
                longitude: "-73.7949",
                address: "Highway 95 & Route 25, Queens, NY 11004",
                lastUpdated: "2024-01-15 09:20:00"
            },
            site5: {
                name: "Industrial Warehouse",
                latitude: "40.6892",
                longitude: "-74.0445",
                address: "321 Industrial Park, Brooklyn, NY 11005",
                lastUpdated: "2024-01-15 11:00:00"
            }
        };

        // Sample timeline data
        let timelineData = [
            {
                id: 1,
                title: "Project Initiation",
                status: "completed",
                progress: 100,
                date: "2024-01-01",
                description: "Project kickoff meeting completed. All stakeholders aligned on objectives and timeline.",
                updatedBy: "John Smith",
                updatedAt: "2024-01-01 09:00:00"
            },
            {
                id: 2,
                title: "Site Preparation",
                status: "completed",
                progress: 100,
                date: "2024-01-05",
                description: "Site cleared and prepared. All necessary permits obtained. Safety measures implemented.",
                updatedBy: "Mike Johnson",
                updatedAt: "2024-01-05 15:30:00"
            },
            {
                id: 3,
                title: "Foundation Work",
                status: "completed",
                progress: 100,
                date: "2024-01-10",
                description: "Foundation excavation and concrete pouring completed. Quality inspections passed.",
                updatedBy: "Sarah Wilson",
                updatedAt: "2024-01-10 17:45:00"
            },
            {
                id: 4,
                title: "Structural Framework",
                status: "in-progress",
                progress: 75,
                date: "2024-01-15",
                description: "Steel framework installation 75% complete. On schedule for completion by end of week.",
                updatedBy: "David Brown",
                updatedAt: "2024-01-15 14:20:00"
            },
            {
                id: 5,
                title: "Electrical Installation",
                status: "pending",
                progress: 0,
                date: "2024-01-20",
                description: "Awaiting completion of structural work before beginning electrical installation.",
                updatedBy: "Lisa Garcia",
                updatedAt: "2024-01-15 10:00:00"
            },
            {
                id: 6,
                title: "Plumbing Installation",
                status: "pending",
                progress: 0,
                date: "2024-01-25",
                description: "Scheduled to begin after electrical rough-in is completed.",
                updatedBy: "Tom Anderson",
                updatedAt: "2024-01-15 10:00:00"
            },
            {
                id: 7,
                title: "Interior Finishing",
                status: "pending",
                progress: 0,
                date: "2024-02-01",
                description: "Interior work will commence once all MEP installations are complete.",
                updatedBy: "Emma Davis",
                updatedAt: "2024-01-15 10:00:00"
            },
            {
                id: 8,
                title: "Final Inspection",
                status: "pending",
                progress: 0,
                date: "2024-02-15",
                description: "Final building inspection and certification process.",
                updatedBy: "John Smith",
                updatedAt: "2024-01-15 10:00:00"
            }
        ];

        // Load site location data
        function loadSiteLocation() {
            const siteSelect = document.getElementById('siteSelect');
            const locationInfo = document.getElementById('locationInfo');
            const mapContainer = document.getElementById('mapContainer');
            
            if (siteSelect.value && siteData[siteSelect.value]) {
                const site = siteData[siteSelect.value];
                
                document.getElementById('latitude').textContent = site.latitude;
                document.getElementById('longitude').textContent = site.longitude;
                document.getElementById('address').textContent = site.address;
                document.getElementById('lastUpdated').textContent = site.lastUpdated;
                
                locationInfo.style.display = 'block';
                mapContainer.style.display = 'block';
            } else {
                locationInfo.style.display = 'none';
                mapContainer.style.display = 'none';
            }
        }

        // Track current location
        function trackLocation() {
            const trackBtn = document.querySelector('.track-btn');
            trackBtn.disabled = true;
            trackBtn.textContent = 'üìç Tracking...';
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const lat = position.coords.latitude.toFixed(4);
                        const lng = position.coords.longitude.toFixed(4);
                        const timestamp = new Date().toLocaleString();
                        
                        document.getElementById('latitude').textContent = lat;
                        document.getElementById('longitude').textContent = lng;
                        document.getElementById('lastUpdated').textContent = timestamp;
                        
                        trackBtn.disabled = false;
                        trackBtn.textContent = 'üìç Location Updated!';
                        
                        setTimeout(() => {
                            trackBtn.textContent = 'üìç Track Current Location';
                        }, 2000);
                    },
                    function(error) {
                        alert('Error getting location: ' + error.message);
                        trackBtn.disabled = false;
                        trackBtn.textContent = 'üìç Track Current Location';
                    }
                );
            } else {
                alert('Geolocation is not supported by this browser.');
                trackBtn.disabled = false;
                trackBtn.textContent = 'üìç Track Current Location';
            }
        }

        // Save email settings
        function saveEmailSettings() {
            const primaryEmail = document.getElementById('primaryEmail').value;
            const secondaryEmail = document.getElementById('secondaryEmail').value;
            const dailyReports = document.getElementById('emailDaily').checked;
            const milestones = document.getElementById('emailMilestone').checked;
            const issues = document.getElementById('emailIssues').checked;
            
            // Simulate saving to backend
            console.log('Saving email settings:', {
                primaryEmail,
                secondaryEmail,
                preferences: { dailyReports, milestones, issues }
            });
            
            showNotificationStatus('Email settings saved successfully!');
        }

        // Save SMS settings
        function saveSMSSettings() {
            const primaryPhone = document.getElementById('primaryPhone').value;
            const secondaryPhone = document.getElementById('secondaryPhone').value;
            const urgentOnly = document.getElementById('smsUrgent').checked;
            const milestones = document.getElementById('smsMilestone').checked;
            const weekly = document.getElementById('smsWeekly').checked;
            
            // Simulate saving to backend
            console.log('Saving SMS settings:', {
                primaryPhone,
                secondaryPhone,
                preferences: { urgentOnly, milestones, weekly }
            });
            
            showNotificationStatus('SMS settings saved successfully!');
        }

        // Show notification status
        function showNotificationStatus(message) {
            const statusDiv = document.getElementById('notificationStatus');
            statusDiv.textContent = '‚úÖ ' + message;
            statusDiv.style.display = 'block';
            
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 3000);
        }

        // Render timeline
        function renderTimeline() {
            const container = document.getElementById('timelineContainer');
            container.innerHTML = '<div class="timeline-line"></div>';
            
            timelineData.forEach(item => {
                const timelineItem = document.createElement('div');
                timelineItem.className = `timeline-item ${item.status}`;
                
                timelineItem.innerHTML = `
                    <div class="status-header">
                        <span class="status-title">${item.title}</span>
                        <span class="status-badge ${item.status}">${item.status.replace('-', ' ')}</span>
                    </div>
                    <div class="status-description">${item.description}</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${item.progress}%"></div>
                    </div>
                    <div class="status-meta">
                        <span>üìÖ ${item.date}</span>
                        <span>üë§ ${item.updatedBy}</span>
                        <span>üïí ${item.updatedAt}</span>
                        <span>üìä ${item.progress}% Complete</span>
                    </div>
                `;
                
                container.appendChild(timelineItem);
            });
        }

        // Add new status update
        function addStatusUpdate() {
            const status = document.getElementById('newStatus').value;
            const progress = parseInt(document.getElementById('newProgress').value) || 0;
            const title = document.getElementById('newTitle').value;
            const date = document.getElementById('newDate').value;
            const description = document.getElementById('newDescription').value;
            
            if (!title || !date || !description) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const newUpdate = {
                id: timelineData.length + 1,
                title: title,
                status: status,
                progress: Math.min(100, Math.max(0, progress)),
                date: date,
                description: description,
                updatedBy: "John Smith", // Current-user
                updatedAt: new Date().toLocaleString()
            };
            
            timelineData.push(newUpdate);
            renderTimeline();
            
            // Clear-form
            document.getElementById('newTitle').value = '';
            document.getElementById('newProgress').value = '';
            document.getElementById('newDate').value = '';
            document.getElementById('newDescription').value = '';
            
            // Simulate sending notifications
            simulateNotifications(newUpdate);
        }

        // Simulate sending notifications
        function simulateNotifications(update) {
            const emailEnabled = document.getElementById('emailDaily').checked;
            const smsEnabled = document.getElementById('smsUrgent').checked;
            
            if (emailEnabled) {
                console.log('üìß Email notification sent:', {
                    to: document.getElementById('primaryEmail').value,
                    subject: `Status Update: ${update.title}`,
                    body: update.description
                });
            }
            
            if (smsEnabled && (update.status === 'on-hold' || update.status === 'completed')) {
                console.log('üì± SMS notification sent:', {
                    to: document.getElementById('primaryPhone').value,
                    message: `${update.title}: ${update.status.replace('-', ' ')} - ${update.progress}% complete`
                });
            }
            
            alert('Status update added and notifications sent!');
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            renderTimeline();
            
            // Set default date to today
            document.getElementById('newDate').value = new Date().toISOString().split('T')[0];
        });
    </script>
</body>
</html>